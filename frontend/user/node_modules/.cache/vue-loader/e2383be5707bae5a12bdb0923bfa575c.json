{"remainingRequest":"F:\\LeTaoOnlineMall\\frontend\\user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\LeTaoOnlineMall\\frontend\\user\\src\\components\\MyRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\LeTaoOnlineMall\\frontend\\user\\src\\components\\MyRegister.vue","mtime":1657763935388},{"path":"F:\\LeTaoOnlineMall\\frontend\\user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\LeTaoOnlineMall\\frontend\\user\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\LeTaoOnlineMall\\frontend\\user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\LeTaoOnlineMall\\frontend\\user\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNeVJlZ2lzdGVyIiwNCiAgcHJvcHM6IFsicmVnaXN0ZXIiXSwNCiAgZGF0YSgpIHsNCiAgICAvLyDnlKjmiLflkI3nmoTmoKHpqozmlrnms5UNCiAgICBsZXQgdmFsaWRhdGVOYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXnlKjmiLflkI0iKSk7DQogICAgICB9DQogICAgICAvLyDnlKjmiLflkI3ku6XlrZfmr43lvIDlpLQs6ZW/5bqm5ZyoNS0xNuS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZfkuIvliJLnur8NCiAgICAgIGNvbnN0IHVzZXJOYW1lUnVsZSA9IC9eW2EtekEtWl1bYS16QS1aMC05X117NCwxNX0kLzsNCiAgICAgIGlmICh1c2VyTmFtZVJ1bGUudGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgLy/liKTmlq3mlbDmja7lupPkuK3mmK/lkKblt7Lnu4/lrZjlnKjor6XnlKjmiLflkI0NCiAgICAgICAgY29uc29sZS5sb2codGhpcy5SZWdpc3RlclVzZXIubmFtZSkNCiAgICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgICAucG9zdCgiL21hbGwvY29uc3VtZXIvZmluZFVzZXJOYW1lIiwgbnVsbCx7cGFyYW1zOnt1c2VybmFtZTogdGhpcy5SZWdpc3RlclVzZXIubmFtZX19KQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAvLyDigJwyMDDigJ3ku6PooajnlKjmiLflkI3kuI3lrZjlnKjvvIzlj6/ku6Xms6jlhowNCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09ICIyMDAiKSB7DQogICAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzIik7DQogICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihyZXMuZGF0YS5tc2cpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7DQogICAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLlrZfmr43lvIDlpLQs6ZW/5bqmNS0xNuS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZfkuIvliJLnur8iKSk7DQogICAgICB9DQogICAgfTsNCiAgICAvLyDlr4bnoIHnmoTmoKHpqozmlrnms5UNCiAgICBsZXQgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgaWYgKHZhbHVlID09PSAiIikgew0KICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXlr4bnoIEiKSk7DQogICAgICB9DQogICAgICAvLyDlr4bnoIHku6XlrZfmr43lvIDlpLQs6ZW/5bqm5ZyoNi0xOOS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZflkozkuIvliJLnur8NCiAgICAgIGNvbnN0IHBhc3N3b3JkUnVsZSA9IC9eW2EtekEtWl1cd3s1LDE3fSQvOw0KICAgICAgaWYgKHBhc3N3b3JkUnVsZS50ZXN0KHZhbHVlKSkgew0KICAgICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnZhbGlkYXRlRmllbGQoImNoZWNrUGFzcyIpOw0KICAgICAgICByZXR1cm4gY2FsbGJhY2soKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBjYWxsYmFjaygNCiAgICAgICAgICBuZXcgRXJyb3IoIuWtl+avjeW8gOWktCzplb/luqY2LTE45LmL6Ze0LOWFgeiuuOWtl+avjeaVsOWtl+WSjOS4i+WIkue6vyIpDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCiAgICAvLyDnoa7orqTlr4bnoIHnmoTmoKHpqozmlrnms5UNCiAgICBsZXQgdmFsaWRhdGVDb25maXJtUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsNCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl56Gu6K6k5a+G56CBIikpOw0KICAgICAgfQ0KICAgICAgLy8g5qCh6aqM5piv5ZCm5Lul5a+G56CB5LiA6Ie0DQogICAgICBpZiAodGhpcy5SZWdpc3RlclVzZXIucGFzcyAhPSAiIiAmJiB2YWx1ZSA9PT0gdGhpcy5SZWdpc3RlclVzZXIucGFzcykgew0KICAgICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnZhbGlkYXRlRmllbGQoImNoZWNrUGFzcyIpOw0KICAgICAgICByZXR1cm4gY2FsbGJhY2soKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeeahOWvhueggeS4jeS4gOiHtCIpKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIHJldHVybiB7DQogICAgICBpc1JlZ2lzdGVyOiBmYWxzZSwgLy8g5o6n5Yi25rOo5YaM57uE5Lu25piv5ZCm5pi+56S6DQogICAgICBSZWdpc3RlclVzZXI6IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIHBhc3M6ICIiLA0KICAgICAgICBjb25maXJtUGFzczogIiINCiAgICAgIH0sDQogICAgICAvLyDnlKjmiLfkv6Hmga/moKHpqozop4TliJksdmFsaWRhdG9yKOagoemqjOaWueazlSksdHJpZ2dlcijop6blj5HmlrnlvI8pLGJsdXLkuLrlnKjnu4Tku7YgSW5wdXQg5aSx5Y6754Sm54K55pe26Kem5Y+RDQogICAgICBydWxlczogew0KICAgICAgICBuYW1lOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlTmFtZSwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICBwYXNzOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcywgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICBjb25maXJtUGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZUNvbmZpcm1QYXNzLCB0cmlnZ2VyOiAiYmx1ciIgfV0NCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICB3YXRjaDogew0KICAgIC8vIOebkeWQrOeItue7hOS7tuS8oOi/h+adpeeahHJlZ2lzdGVy5Y+Y6YeP77yM6K6+572udGhpcy5pc1JlZ2lzdGVy55qE5YC8DQogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKHZhbCkgew0KICAgICAgICB0aGlzLmlzUmVnaXN0ZXIgPSB2YWw7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDnm5HlkKx0aGlzLmlzUmVnaXN0ZXLlj5jph4/nmoTlgLzvvIzmm7TmlrDniLbnu4Tku7ZyZWdpc3RlcuWPmOmHj+eahOWAvA0KICAgIGlzUmVnaXN0ZXI6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKCF2YWwpIHsNCiAgICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS5yZXNldEZpZWxkcygpOw0KICAgICAgICB0aGlzLiRlbWl0KCJmcm9tQ2hpbGQiLCB2YWwpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIFJlZ2lzdGVyKCkgew0KICAgICAgLy8g6YCa6L+HZWxlbWVudOiHquWumuS5ieihqOWNleagoemqjOinhOWIme+8jOagoemqjOeUqOaIt+i+k+WFpeeahOeUqOaIt+S/oeaBrw0KICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIC8v5aaC5p6c6YCa6L+H5qCh6aqM5byA5aeL5rOo5YaMDQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgICAgICAucG9zdCgiL21hbGwvY29uc3VtZXIvcmVnaXN0ZXIiLCB7DQogICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLlJlZ2lzdGVyVXNlci5uYW1lLA0KICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5SZWdpc3RlclVzZXIucGFzcw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIC8vIOKAnDIwMOKAneS7o+ihqOazqOWGjOaIkOWKn++8jOWFtuS7lueahOWdh+S4uuWksei0pQ0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgLy8g6ZqQ6JeP5rOo5YaM57uE5Lu2DQogICAgICAgICAgICAgICAgdGhpcy5pc1JlZ2lzdGVyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAvLyDlvLnlh7rpgJrnn6XmoYbmj5DnpLrms6jlhozmiJDlip/kv6Hmga8NCiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2NlZWQocmVzLmRhdGEubXNnKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyDlvLnlh7rpgJrnn6XmoYbmj5DnpLrms6jlhozlpLHotKXkv6Hmga8NCiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHJlcy5kYXRhLm1zZyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["MyRegister.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyRegister.vue","sourceRoot":"src/components","sourcesContent":["<!--\r\n * @Description: 用户注册组件\r\n * @Author: hai-27\r\n * @Date: 2020-02-19 22:20:35\r\n * @LastEditors: hai-27\r\n * @LastEditTime: 2020-03-01 15:34:34\r\n -->\r\n<template>\r\n  <div id=\"register\">\r\n    <el-dialog title=\"注册\" width=\"300px\" center :visible.sync=\"isRegister\">\r\n      <el-form\r\n        :model=\"RegisterUser\"\r\n        :rules=\"rules\"\r\n        status-icon\r\n        ref=\"ruleForm\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item prop=\"name\">\r\n          <el-input\r\n            prefix-icon=\"el-icon-user-solid\"\r\n            placeholder=\"请输入账号\"\r\n            v-model=\"RegisterUser.name\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"pass\">\r\n          <el-input\r\n            prefix-icon=\"el-icon-view\"\r\n            type=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            v-model=\"RegisterUser.pass\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"confirmPass\">\r\n          <el-input\r\n            prefix-icon=\"el-icon-view\"\r\n            type=\"password\"\r\n            placeholder=\"请再次输入密码\"\r\n            v-model=\"RegisterUser.confirmPass\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button size=\"medium\" type=\"primary\" @click=\"Register\" style=\"width:100%;\">注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"MyRegister\",\r\n  props: [\"register\"],\r\n  data() {\r\n    // 用户名的校验方法\r\n    let validateName = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"请输入用户名\"));\r\n      }\r\n      // 用户名以字母开头,长度在5-16之间,允许字母数字下划线\r\n      const userNameRule = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;\r\n      if (userNameRule.test(value)) {\r\n        //判断数据库中是否已经存在该用户名\r\n        console.log(this.RegisterUser.name)\r\n        this.$axios\r\n          .post(\"/mall/consumer/findUserName\", null,{params:{username: this.RegisterUser.name}})\r\n          .then(res => {\r\n            // “200”代表用户名不存在，可以注册\r\n            if (res.data.code == \"200\") {\r\n              this.$refs.ruleForm.validateField(\"checkPass\");\r\n              return callback();\r\n            } else {\r\n              return callback(new Error(res.data.msg));\r\n            }\r\n          })\r\n          .catch(err => {\r\n            return Promise.reject(err);\r\n          });\r\n      } else {\r\n        return callback(new Error(\"字母开头,长度5-16之间,允许字母数字下划线\"));\r\n      }\r\n    };\r\n    // 密码的校验方法\r\n    let validatePass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        return callback(new Error(\"请输入密码\"));\r\n      }\r\n      // 密码以字母开头,长度在6-18之间,允许字母数字和下划线\r\n      const passwordRule = /^[a-zA-Z]\\w{5,17}$/;\r\n      if (passwordRule.test(value)) {\r\n        this.$refs.ruleForm.validateField(\"checkPass\");\r\n        return callback();\r\n      } else {\r\n        return callback(\r\n          new Error(\"字母开头,长度6-18之间,允许字母数字和下划线\")\r\n        );\r\n      }\r\n    };\r\n    // 确认密码的校验方法\r\n    let validateConfirmPass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        return callback(new Error(\"请输入确认密码\"));\r\n      }\r\n      // 校验是否以密码一致\r\n      if (this.RegisterUser.pass != \"\" && value === this.RegisterUser.pass) {\r\n        this.$refs.ruleForm.validateField(\"checkPass\");\r\n        return callback();\r\n      } else {\r\n        return callback(new Error(\"两次输入的密码不一致\"));\r\n      }\r\n    };\r\n    return {\r\n      isRegister: false, // 控制注册组件是否显示\r\n      RegisterUser: {\r\n        name: \"\",\r\n        pass: \"\",\r\n        confirmPass: \"\"\r\n      },\r\n      // 用户信息校验规则,validator(校验方法),trigger(触发方式),blur为在组件 Input 失去焦点时触发\r\n      rules: {\r\n        name: [{ validator: validateName, trigger: \"blur\" }],\r\n        pass: [{ validator: validatePass, trigger: \"blur\" }],\r\n        confirmPass: [{ validator: validateConfirmPass, trigger: \"blur\" }]\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    // 监听父组件传过来的register变量，设置this.isRegister的值\r\n    register: function(val) {\r\n      if (val) {\r\n        this.isRegister = val;\r\n      }\r\n    },\r\n    // 监听this.isRegister变量的值，更新父组件register变量的值\r\n    isRegister: function(val) {\r\n      if (!val) {\r\n        this.$refs[\"ruleForm\"].resetFields();\r\n        this.$emit(\"fromChild\", val);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    Register() {\r\n      // 通过element自定义表单校验规则，校验用户输入的用户信息\r\n      this.$refs[\"ruleForm\"].validate(valid => {\r\n        //如果通过校验开始注册\r\n        if (valid) {\r\n          this.$axios\r\n            .post(\"/mall/consumer/register\", {\r\n              username: this.RegisterUser.name,\r\n              password: this.RegisterUser.pass\r\n            })\r\n            .then(res => {\r\n              // “200”代表注册成功，其他的均为失败\r\n              if (res.data.code === 200) {\r\n                // 隐藏注册组件\r\n                this.isRegister = true;\r\n                // 弹出通知框提示注册成功信息\r\n                this.notifySucceed(res.data.msg);\r\n              } else {\r\n                // 弹出通知框提示注册失败信息\r\n                this.notifyError(res.data.msg);\r\n              }\r\n            })\r\n            .catch(err => {\r\n              return Promise.reject(err);\r\n            });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n</style>"]}]}